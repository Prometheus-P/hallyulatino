---
import { type CollectionEntry, getCollection } from 'astro:content';
import ArticleLayout from '../../layouts/ArticleLayout.astro';

export async function getStaticPaths() {
  const kpop = await getCollection('kpop');
  return kpop.map((artist) => ({
    params: { slug: artist.slug },
    props: artist,
  }));
}

type Props = CollectionEntry<'kpop'>;

const artist = Astro.props;
const { Content } = await artist.render();
---

<ArticleLayout
  title={artist.data.title}
  description={artist.data.description}
  pubDate={artist.data.pubDate}
  updatedDate={artist.data.updatedDate}
  heroImage={artist.data.heroImage}
  heroImageAlt={artist.data.heroImageAlt}
  author={artist.data.author}
  tags={artist.data.tags}
  breadcrumbs={[{ name: 'K-Pop', url: '/kpop' }]}
>
  <!-- Artist Info Box -->
  <aside class="not-prose mb-8 rounded-lg bg-purple-50 p-6">
    <h2 class="text-lg font-semibold text-gray-900 mb-4">Información del Artista</h2>
    <dl class="grid grid-cols-2 gap-4 text-sm">
      <div>
        <dt class="font-medium text-gray-500">Nombre</dt>
        <dd class="text-gray-900">{artist.data.artistName}</dd>
      </div>
      <div>
        <dt class="font-medium text-gray-500">Tipo</dt>
        <dd class="text-gray-900 capitalize">{artist.data.artistType}</dd>
      </div>
      {artist.data.agency && (
        <div>
          <dt class="font-medium text-gray-500">Agencia</dt>
          <dd class="text-gray-900">{artist.data.agency}</dd>
        </div>
      )}
      {artist.data.debutYear && (
        <div>
          <dt class="font-medium text-gray-500">Año de Debut</dt>
          <dd class="text-gray-900">{artist.data.debutYear}</dd>
        </div>
      )}
      {artist.data.members && artist.data.members.length > 0 && (
        <div class="col-span-2">
          <dt class="font-medium text-gray-500">Miembros</dt>
          <dd class="text-gray-900">{artist.data.members.join(', ')}</dd>
        </div>
      )}
    </dl>
  </aside>

  <Content />
</ArticleLayout>
